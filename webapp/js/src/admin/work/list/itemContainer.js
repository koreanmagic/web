define(["jquery","component/Popup","utils","jquery-ui"],function(a,b,c){function d(b,c){var d=this;c=c||m,a.each(b,function(a,b){e(a,c).call(d,a,b)})}function e(a,b){var c=b[a];return c?"string"==typeof c?b[c]:c:b["default"]}function f(a){return this.find("[data-key='"+a+"']")}function g(b,c,d,e){var f=this;return void 0===d&&(d=c,c=void 0),d="string"==typeof d?this.constructor.prototype[d]:d,a.isFunction(d)&&(d={success:d}),jQuery.ajax(jQuery.extend({url:b,type:e,dataType:"json",data:c},jQuery.isPlainObject(b)&&b)).success(function(b){(d.success||a.noop).apply(f,arguments)}).fail(function(b){(d.error||a.noop).apply(f,arguments)}).done(function(b){(d.complete||a.noop).apply(f,arguments)})}function h(a,b){this[0]=this.element=1===a.nodeType?a:a[0],this.length=1,this.parent=b,this.data("instance",this),this.create(),this.init()}function i(a,b){var c=/^[\.#]/.test(a);return void 0===b?c?this.find(a).text():this.data(a):(c?this.find(a).text(b):this.data(a,b),b)}{var j,k,l=(1*new Date,c.dataConvert()),m={"default":function(a,b){var c;b=b?b:"",c=f.call(this,a),c.length&&c.text(l(b,a))},memo:function(a,b){ele=f.call(this,a),ele.length&&ele.html(l(b,a))},subcontractor:function(a,b){this.find("[data-info='subcontractor']").attr("data-info-key",b.id),f.call(this,a).text(b.name)},manager:function(a,b){var c=f.call(this,"manager"),d=f.call(this,"manager.position");null!=b?(c.text(b.name).attr("data-info-key",b.id).attr("data-info","manager"),d.text(b.position)):(c.text("담당자 없음").attr("data-info-key","").removeAttr("data-info"),d.text(""))}},n={defaultSort:"_customer"},o=a.extend({},{version:"1.1",options:n,_create:function(){k=this.widgetFullName,j=this.widgetSelectorPrefix=k+"-";var b=this,c=this.options;h.fn.extend(c.extendOfItem),this.access("customer-selector",a("._customer-select").detach()),this.access("status",{editor:null,popup:!1}),this.length=0,this.find("._work-wrap").each(function(a,c){b[b.length++]=new h(c,b).addClass(b.widgetFullName+"-item")}),this._initUI(),this._registerEvent()},_init:function(){},_destroy:function(){var a=this.items.getItem(),b=null;for(a.length;b=a.pop();)this.option("deleteItem").call(this,b.remove()),this._reflesh();this.items.destroy(),this.element.remove()},find:function(b,c){return a(b,c||this.element)},access:c.access,status:function(a,b){return void 0===a?this.access("status"):(a="status."+a,void 0===b?this.access(a):this.access(a,b))}},{getJSON:function(a,b,c){return g.call(this,a,b,c,"GET")},postJSON:function(a,b,c){return g.call(this,a,b,c,"POST")}},{_initUI:function(){var b=this;this.editorElement=a("#editor").on("popOn",function(a){b.status("popup",!0)}).on("popOff",function(a){b.status("editor").refresh(),b.status("editor",null),b.status("popup",!1)})},popup:b,editor:function(a,b){return a===!1?this.editorElement.editorTabs("disable"):(this.status("editor",b),this.popup(this.editorElement.editorTabs(a))),this},popInfo:function(a,b){d.call(a,b),this.popup(a)},convertor:c.dataConvert()},{_globalEvent:{},_registerEvent:function(){var b=this,c=h.prototype,d={};a.each(c.eventHandlers,function(e,f){f="string"==typeof f?c[f]:f,d[e]=function(c){target=a(c.target),c.item=target.closest("."+j+"item").data("instance"),f.apply(b,arguments)}}),this._on(d),d={},a.each(this._globalEvent,function(c,e){a.isFunction(e)?d[c]=e:b._on(c,e)}),this._on(d)}});a.widget("ui.itemContainer",o)}h.fn=h.prototype=a(),h.fn.extend({access:i,create:function(){this.id=this.access("workId"),this.customer=this.access("customerId")},getValueEle:function(){var b={};return a.each(this.find("[data-key]"),function(a,d){c.createObjByName(b,d.getAttribute("data-key"),d)}),b},destroy:function(){return this},refresh:a.noop,editor:function(b){var c=this,d=this.parent;a.ajax("/admin/work/editor/init/"+this.id).success(function(){b=a.extend(b,{item:c}),d.editor(b,c)})},URL:function(a){return a+this.id},typeHandlers:a.extend({},m,{afterProcess:function(a,b){b?f.call(this,"itemDetail").next().removeClass("ui-helper-hidden"):f.call(this,"itemDetail").next().addClass("ui-helper-hidden")},memo:function(a,b){b?this.find(".btn-memo").removeClass("disable"):this.find(".btn-memo").addClass("disable"),m.memo.call(this,a,b)},delivery:function(b,c){var d=["fa-male","fa-cubes","fa-truck"],e=c.ordinal,g=f.call(this,b);a.each(d,function(a,b){a==e?(g.attr("alt",c.value),g.addClass(b)):g.removeClass(b)})}}),values:function(a){var b=function(a){return a.textContent};return a?d.call(this,a,this.typeHandlers):c.mapCopy(this.getValueEle(),b),a},setClass:function(a,b){var c=a.length;if(b!==!1)for(;c--;)this.addClass(a[c]);else for(;c--;)this.removeClass(a[c])},getJSON:o.getJSON,postJSON:o.postJSON,init:a.noop})});
//# sourceMappingURL=itemContainer.js.map