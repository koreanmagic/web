define(["jquery"],function(a){function b(a){return"string"==typeof g[a]?g[g[a]]:g[a]}function c(b,c){var d=this;this.context=c,this.name=b[0].name,this.type=b[0].type,this.status=null,this.length=b.length,a.each(b,function(a,b){d[a]=b}),this.actives=[this],this.create(),this.init()}var d="validate-target",e="validate-success",f="validate-error",g={text:{get:function(){return this.val()},set:function(a){this.val(a)}},hidden:"text",radio:{get:function(){return this.filter(":checked").val()},set:function(a){return a?(this.each(function(b,c){return c.value===a?(c.checked=!0,!1):void 0}),!0):void this.filter(":not(:checked)").each(function(a,b){b.checked=!1})}},checkbox:"redio",textarea:"text",file:{init:function(){}},"select-one":{get:function(){return this.find("option:selected").val()},set:function(b){return b?(b=a.isPlainObject(b)?b.id:b,this.find("option[value]").each(function(a,c){return c.value==b?(c.selected=!0,!1):void 0}),!0):void 0}}};a.extend(c.prototype,a(),{create:function(){var b=this,c=this.attr("data-value-target");c&&(c=/([^\s]+)(.*)/.exec(c),this.context.addEvent(c[1],c[2],function(a){b.setValue(a.currentTarget.textContent),b.trigger("change")})),a.each(this._actives,function(a,c){c.call(b,b.actives)})},_actives:{check:function(a){var b=this.context.find("[data-check-for='"+this.name+"']");b.length&&a.push(b.append('<i class="fa fa-check"></i>'))},error:function(a){var b=this.context.find("[data-error-for='"+this.name+"']");b.length&&(a.push(b),this.error=function(a){a===!1&&b.empty(),"string"==typeof a?b.text(a):b.append(a)})},inputGroup:function(a){a.push(this.closest(".input-group"))}},init:function(b){return this.status=null,b=this.origValue=b||"",this.setClass().error(!1),b?this.setValue(b).validate():this.setValue(""),(g[this.type].init||a.noop).call(this),this},validate:function(){var a,b=this.getRule("valid"),c=!1;return(a=b.call(this,this.getValue()))!==!0&&(c=a!==!1?a:"입력값 에러",a=!1),this.status=a,this.error(c),this.setClass(),a},setClass:function(){var b=this.status;return a.each(this.actives,function(a,c){null==b?c.removeClass(f).removeClass(e):b?c.removeClass(f).addClass(e):c.removeClass(e).addClass(f)}),this},error:a.noop,isModify:function(){return null===this.status?!1:this.origValue==this.getValue()?!1:!0},restore:function(){this.init(this.origValue)},getSerialize:function(){return{name:this.name,value:this.getValue()}},getValue:function(){return b(this.type).get.call(this)},setValue:function(a){return b(this.type).set.call(this,a),this},getRule:function(a){return a?this.context.getRule(this.name)[a]:this.context.getRule(this.name)}});var h={submit:function(a){this.validate()&&this.options.beforeCommit.call(this)||a.preventDefault()},reset:function(a){a.preventDefault(),this.restore(),this.block(!0)},"validate .validate-target":function(a){this.getUnit(a.target).validate()},"focusout .validate-target":function(a){var b=this.getUnit(a.target);b.getRule("focusout").call(b,a.target,b.getValue()),b.validate()},"keyup .validate-target":function(a){this.getUnit(a.target).validate(),this.block(this.isModify()?!1:!0)},"change .validate-target":function(a){this.getUnit(a.target).validate(),this.isModify()?this.options.modifyTrue.call(this):this.options.modifyFalse.call(this)}},i={create:function(a){},init:a.noop,beforeCommit:function(){return!0},modifyTrue:a.noop,modifyFalse:a.noop},j={valid:function(a){return!0},focusout:function(a,b){return b}},k=1,l=function(b,c){var d;if(b=a(b),d=b.data("FormValidate"))return a.extend(!0,d.option,c),d._init(),d;if(!this.validate)return new l(b,c);if(!/form/i.test(b[0].tagName))throw new Error("form 엘리먼트만 사용할 수 있습니다");b.data("FormValidate",this),this.form=b.addClass("validate-form")[0],this.options=a.extend(!0,{},i,c),this.create()};return a.extend(l.prototype,{create:function(b){var e,f=this,b=this.options,g=this.units={},i=this.ruleTable={};this.uuid="FormValidate"+k++,this.eventNamespaceG="."+this.uuid+"G",this.eventNamespace="."+this.uuid,this.addEvent(h),this.find("[name]").not((b.exclude||[]).join(",")).addClass(d).each(function(b,c){e=c.name,g[e]=g[e]||[],g[e].push(c),i[e]=i[e]||a.extend({},j)}),a.each(g,function(a,b){g[a]=new c(b,f)}),this._rebuildRuleTable(b.rules),this._globalRulesHandler(b.globalRules),b.create.call(this,i),this._init()},getForm:function(){return this.form},find:function(b){return a(this.form).find(b)},_init:function(){var a=this.options;this.initValue(a.value),a.init.call(this)},initValue:function(b){var c,d;a.each(this.getUnit(),function(e,f){c=f.name.split("."),d=b,d&&a.each(c,function(a,b){d=d[b],!d}),f.init(d)}),this._setElementText(b),this.block(!0)},_setElementText:function(b){a("[data-prop]").each(function(a,c){c.type?c.value=b[c.getAttribute("data-prop")]:c.textContent=b[c.getAttribute("data-prop")]})},addEvent:function(b,c,d){var e=this;a.isPlainObject(b)&&a.each(b,function(a,b){var c=a.match(/^([\w:-]*)\s*(.*)$/),d=c[1],f=c[2];e.addEvent(d,f,b)}),b=b+"."+this.eventNamespace,a(this.form).on(b,c,function(a){var b=a.data;a.data=e.options.data,d.call(e,a),a.data=b})},_trigger:function(b,c){a(this.form).trigger(b,c)},_rebuildRuleTable:function(b){var c=this,d=(this.units,this.ruleTable);return a.each(b||{},function(b,e){c.find(b).each(function(c,f){if(a.extend(!0,d[f.name],e),void 0===d[f.name])throw new Error("rules 선택자인 "+b+"이 validate-target으로 등록되지 않았습니다.");if(d[f.name].valid instanceof RegExp){var g=d[f.name].valid;d[f.name].valid=function(a){return g.test(a)}}})}),this},_globalRulesHandler:function(b){if(void 0!==b){var c,d=this,e=this.ruleTable;a.each(this._globalRules,function(f,g){(c=b[f])&&a(c.join(",")).each(function(a,b){e[b.name].valid=g.call(d,e[b.name].valid)})})}},_globalRules:{required:function(a){return function(b){return b?a.call(this,b):"필수 입력"}},number:function(a){return function(b){return isNan(b)?"숫자만 입력할 수 있습니다.":a.call(this,b)}}},getRule:function(a){return void 0===a?this.ruleTable:this.ruleTable[a]},getUnit:function(a){return void 0==a?this.units:this.units[a.name?a.name:a]},commit:function(){this._trigger("submit")},isModify:function(){var b=!1;return a.each(this.getUnit(),function(a,c){return c.isModify()?!(b=!0):void 0}),b},restore:function(){a.each(this.getUnit(),function(a,b){b.restore()})},block:function(a){var b=this.find("[type='submit'], [type='reset']");return b.length&&(a?b.attr("disabled","disabled"):b.removeAttr("disabled")),this},validate:function(b){var c=!0;return void 0===b?a.each(this.getUnit(),function(a,b){c=b.validate()?c:!1}):c=this.getUnit(b).validate(),c},values:function(){var b=[];return a.each(this.units,function(a,c){b=b.concat(c.getSerialize())}),b},serialize:function(){return a.param(this.values()).replace(/\+/g,"%20")}}),l});
//# sourceMappingURL=FormValidate.js.map