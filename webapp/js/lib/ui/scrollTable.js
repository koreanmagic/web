define(["jquery","utils","jquery-ui"],function(a,b){function c(){this.values={},this.length=0}function d(b,c){var e,f;if(null==b||null==c)return!1;for(var g in b){if(void 0===(f=c[g]))return!1;if(a.isPlainObject(e=b[g]))return d(e,f);if(f!=e)return!1}return!0}c.prototype={add:function(a,b){this.values[b]=a,this.length++},remove:function(a){var b=this.values[a];return this.length--,delete this.values[a],b},get:function(a){return this.values[a]},size:function(){return this.length},list:function(){return this.values}};var e=a.extend({},b.dataConvert(null),{$index:function(a,b){return b}});widgetOptions={listHandler:function(a,b,c){},changeHandler:function(){},types:e,overlapHandler:function(a){return!0},selected:!0,selectHandler:a.noop,cancleHandler:a.noop,selectLen:1,selectElement:!0,removeHandler:function(a,b){return!0},removable:!0,init:a.noop,disableHandler:a.noop,enableHandler:a.noop,events:{"click .btn-delete":function(b){return b.preventDefault(),b.stopPropagation(),this.remove(a(b.currentTarget).closest("ul").attr("data-uuid")),!1},"click .btn-select":function(b){b.preventDefault(),b.stopPropagation();a(b.currentTarget).closest("ul").attr("data-uuid");return!1},"click .select-list":function(b){this._selectedOn(a(b.currentTarget).attr("data-uuid"))}}},proto=a.extend({},{version:"1.1",options:widgetOptions,_extend:a.noop,_create:function(){var b=this,c=this.options,d=this.elements={};a.each(this._elements,function(a,c){d[a]=c.call(b)}),c.removable&&this.element.addClass("removable"),this._on(c.events)},_elements:{list:function(){return this.element.find("div.list")},overlay:function(){return this.element.find("div.ui-overlay")},select:function(){var a=this.element.find("div.select");return this.options.selectElement||a.addClass("ui-helper-hidden"),a}},_init:function(){this.options;this.clear()},clear:function(){return this.getEle("list").empty(),this.itemList=new c,this.uuid=0,this.appendSelect(),this.selectArray=[],this},getEle:function(a){return this.elements[a]},access:function(a,b){return this.element.data(a,b)},_destroy:function(){},disable:function(){return this.options.disableHandler.call(this)===!1?this:(this.element.addClass("ui-helper-hidden"),this)},enable:function(){return this.options.enableHandler.call(this)===!1?this:(this.element.removeClass("ui-helper-hidden"),this)},trigger:function(a){this.element.trigger(a)}},{find:function(a){return this.element.find(a)},list:function(){return this.itemList.list()},remove:function(a){var b=this.options,c=this.get(a);if(b.removeHandler.call(this,this.getItem(a),a))return-1!==this.selectArray.indexOf(a)&&this._selectedOff(a),c=this.itemList.remove(a),c.ul.remove(),b.changeHandler.call(this),this},add:function(a,b){this.itemList.add(a,b)},get:function(a){return void 0===a?a:this.itemList.get(a)},getItem:function(a){var b=this.get(a);return b?b.item:a},size:function(){return this.itemList.size()},addList:function(a){for(var b=0,c=a.length;c>b;b++)this.addItem(a[b]);return this},addItem:function(a){(!this.isExists(a)||this.options.overlapHandler.call(this,a))&&(this.add({ul:this.append(a,++this.uuid),item:a},this.uuid),this.options.changeHandler.call(this))},append:function(a,b){var c=this.options,d=this._createUL(a,b);return c.removable&&d.prepend('<div class="delete"><button class="btn-delete small">Del</button></div>'),c.selected?d.addClass("select-list"):d},appendSelect:function(a){return void 0===a?this.getEle("select").empty():this.getEle("select").append(this._createUL(this.getItem(a),a))},_createUL:function(b,c){var d,e,f,g=this,h=this.options.types,i=a('<ul data-uuid="'+c+'">'),j="";return this.find(".header ul li[data-type]").each(function(a,k){e=k.getAttribute("data-type"),f=h[e],d=b[e],d=d||/^\$/.test(e)?f?"string"==typeof f?h[f].call(g,b[e],c,i):f.call(g,b[e],c,i):d||"":"",j+='<li class="'+k.className.match(/(span-\d)/)[1]+" "+e+'">'+d+"</li>"}),i.append(j).appendTo(this.getEle("list"))},typeConvertValue:function(a,b){var c=options.types,d=c[b],e=a[b];return e&&d?"string"==typeof d?c[d].call(self,a[b],uuid,ul):d.call(self,a[b],uuid,ul):e||""},isExists:function(b){var c=!1;return a.each(this.list(),function(a,e){return e=e.item,d(e,b)?!(c=!0):void 0}),c},getItems:function(){if(!this.size())return null;var b=[];return a.each(this.list(),function(a,c){b.push(c.item)}),b},block:function(a){var b=this.getEle("overlay");if(!a)return void b.empty().addClass("ui-helper-hidden");var c=b.height()/2-a.height()/2;b.append(a.css("top",c)).removeClass("ui-helper-hidden")},select:function(b){var c,d=this;wrap=a.isFunction(b)?b:function(c,d){var e=null;return a.each(b,function(a,b){d[a]==b&&(e=c)}),e},a.each(this.list(),function(a,b){return null!=(c=wrap.call(this,a,b.item))?(d._selectedOn(c),!1):void 0})},searchItem:function(b){var c;return a.each(this.list(),function(a,e){return e=e.item,c=d(b,e),c?!(c={uuid:a,item:e}):!0}),c},_selectedOn:function(a){var b=this.options,c=this.get(a).ul;if(b.selected)return c.hasClass("selected")?(this._selectedOff(a),!1):(this._isFull()&&this._selectedOff(this.selectArray[0]),c.addClass("selected"),this.selectArray.push(a),b.selectHandler.call(this,this.getItem(a)),b.selectElement&&this.appendSelect(a),!0)},_selectedOff:function(a){var b=this.options;this.get(a).ul.removeClass("selected"),b.cancleHandler.call(this,this.getItem(a)),this.selectArray.splice(this.selectArray.indexOf(a),1),b.selectElement&&this.getEle("select").find("[data-uuid="+a+"]").remove()},_isFull:function(){return this.selectArray.length==this.options.selectLen},_getSelected:function(a){return void 0===a?this.selectArray:this.selectArray[a]}});a.widget("ui.scrollTable",proto)});
//# sourceMappingURL=scrollTable.js.map