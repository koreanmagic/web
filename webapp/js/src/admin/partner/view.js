define(["jquery","component/FormValidate","src/common/listTable","utils"],function(a,b,c,d){function e(c){var d=this,e={beforeCommit:function(a){return alert(a),!1}},f=this.element=a(c),g=(this.validator=b(c,e),f.find(".modify-btn >a")),h=this.inputs={},i=this.texts={};this.groups=f.find(".form-group"),this.btns={modify:["confirm cancle",g.filter(".modify")],cancle:["modify",g.filter(".cancle").addClass("disable")],confirm:["modify",g.filter(".confirm").addClass("disable")]},f.find("[name]").each(function(a,b){a=b.name,h[a]=b}),f.find("span[data-type]").each(function(a,b){a=b.getAttribute("data-type"),i[a]=b}),a.each(d.btns,function(a,b){b[1].on("click",function(c){c.preventDefault(),b[1].hasClass("disable")||d.mode(a)})}),this._init()}var f=a(".form-wrap"),g=f.attr("data-id"),h=f.attr("data-type"),i="/admin/"+h+"/ajax";e.prototype={_init:function(){var b=this;a.ajax(i+"/get/id/"+g).success(function(a){b.setTexts(d.jsonToDataMap(a))})},setTexts:function(b){a.each(this.texts,function(a,c){c.textContent=b[a]||""})},setInputs:function(b){a.each(this.inputs,function(a,c){c.value=b[a]||""})},serialize:function(){var b=[];return a.each(this.inputs,function(a,c){b.push({name:a,value:c.value})}),b},_mode:{modify:function(b){a.getJSON(i+"/modify/"+g).success(function(a){b.setInputs(d.jsonToDataMap(a)),b.groups.removeClass("hidden")})},cancle:function(b){a.ajax(i+"/modify/done").success(function(){b.groups.addClass("hidden")})},confirm:function(b){option={url:i+"/modify",data:a.param(this.serialize()).replace(/\+/g,"%20"),type:"POST",processData:!1},a.ajax(option).success(function(a){b._init(),b.groups.addClass("hidden")})}},mode:function(b){a.each(this.btns,function(a,c){-1!=c[0].indexOf(b)?c[1].removeClass("disable"):c[1].addClass("disable")}),this._mode[b].call(this,this)}};new e("#businessInfo"),new e("#numberInfo");c("manager",g).fetch(),c("address",g).fetch(),c("bank",g).fetch()});
//# sourceMappingURL=view.js.map